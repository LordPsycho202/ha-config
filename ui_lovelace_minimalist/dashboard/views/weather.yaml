---
title: "Weather"
icon: "mdi:cloud"
theme: "minimalist-mobile"
path: "weather"
cards:
  - type: vertical-stack
    cards:
      - !include /config/ui-includes/alerts.yaml
      - !include welcome.yaml

  - type: vertical-stack
    cards:
      - type: "custom:button-card"
        template: card_title
        name: Forecast
      - show_current: false
        show_forecast: true
        type: weather-forecast
        entity: weather.weather_station
        forecast_type: legacy

  - type: vertical-stack
    cards:
      - type: "custom:button-card"
        template: card_title
        name: Conditions

      - type: conditional
        conditions:
          - entity: binary_sensor.wind_chill_active
            state: "on"
        card:
          type: custom:mushroom-template-card
          primary: >-
            {{ states('sensor.wind_chill') | round(1) }}{{
            state_attr('sensor.wind_chill','unit_of_measurement') }}
          secondary: Wind Chill Warning
          icon: mdi:thermometer-alert
          icon_color: blue

      - type: conditional
        conditions:
          - entity: binary_sensor.heat_index_active
            state: "on"
        card:
          type: custom:mushroom-template-card
          primary: >-
            {{ states('sensor.heat_index') | round(1) }}{{
            state_attr('sensor.heat_index','unit_of_measurement') }}
          secondary: Heat Index Warning
          icon: mdi:thermometer-alert
          icon_color: red

      - type: conditional
        conditions:
          - condition: numeric_state
            entity: counter.days_without_rain
            above: 6
        card:
          type: custom:mushroom-template-card
          primary: >-
            {{ states('counter.days_without_rain') }} {{
            state_attr('counter.days_without_rain','friendly_name') }}
          secondary: >-
            Rain Chance: {{
            state_attr('weather.kwdr_daynight','forecast')[0].precipitation_probability
            }}%
          icon: '{{ state_attr(''counter.days_without_rain'',''icon'') }}'
          entity: counter.days_without_rain
          icon_color: |
            {% if states('counter.days_without_rain')|int > 0 %}
            red
            {% else %}
            blue
            {% endif %}

      - type: custom:button-card
        template: custom_card_rnissen_weather
        variables:
          ulm_custom_card_rnissen_weather: weather.kwdr_daynight
          ulm_custom_card_rnissen_weather_entity_1: sensor.rain_daily
          ulm_custom_card_rnissen_weather_entity_2: sensor.outdoor_humidity
          ulm_custom_card_rnissen_weather_entity_3: sensor.wind_acurite_5n1_b
          ulm_custom_card_rnissen_weather_entity_4: sensor.relative_pressure
          ulm_custom_card_rnissen_weather_name_1: Rain
          ulm_custom_card_rnissen_weather_name_2: Humidity
          ulm_custom_card_rnissen_weather_name_3: Wind
          ulm_custom_card_rnissen_weather_name_4: Pressure
          ulm_custom_card_rnissen_weather_temperature_outside: sensor.outside_temp
          ulm_custom_card_rnissen_weather_date: sensor.date_long

      - type: conditional
        conditions:
          - condition: numeric_state
            entity: sensor.rain_daily
            above: 0
        card:
          type: custom:rain-gauge-card
          entity: sensor.rain_daily
          is_imperial: true
          language: en
          hourly_rate_entity: sensor.rainfall_rate
          show_warning: false
          show_error: false

  - type: vertical-stack
    cards:
      - type: custom:windrose-card
        title: Wind direction
        data_period:
          hours_to_show: 4
        max_width: 400
        refresh_interval: 300
        windspeed_bar_location: right
        windspeed_bar_full: false
        wind_direction_entity:
          entity: sensor.wind_dir_acurite_5n1_b
          direction_unit: degrees
          use_statistics: false
          direction_compensation: 0
        windspeed_entities:
          - entity: sensor.wind_acurite_5n1_b
            name: Wind Speed
            speed_unit: auto
            use_statistics: false
        output_speed_unit: mph
        speed_range_beaufort: true
        windrose_draw_north_offset: 0
        cardinal_direction_letters: NESW
        matching_strategy: direction-first
        center_calm_percentage: true

  - type: vertical-stack
    cards:
      - camera_view: auto
        type: picture-glance
        image: https://511ga.org/map/Cctv/105619--2
        entities:
          - entity: sensor.waze_travel_time
          - entity: sensor.jennifer_time_to_home
      - type: custom:weather-radar-card
        card_title: Radar
        data_source: RainViewer-NEXRAD
        map_style: dark
        zoom_level: 8
        center_latitude: 34.0720728
        center_longitude: -83.6917093
        marker_latitude: 34.0720728
        marker_longitude: -83.6917093
        show_marker: true
        static_map: false
        show_scale: true
        show_range: true
        show_playback: true
        show_zoom: true
        square_map: true
        show_recenter: true
        frame_count: 5
        frame_delay: 1000
        restart_delay: 5000
        extra_labels: true

  - type: markdown
    content: '## "{{states.sensor.quote.state}}" - {{states.sensor.quote_author.state}}'
