type: horizontal-stack
cards:
  - type: conditional
    conditions:
      - entity: input_boolean.mail_present
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Mail
      tap_action:
        action: navigate
        navigation_path: "mailalert"
      icon: "mdi:mail"

  - type: conditional
    conditions:
      - entity: input_boolean.package_present
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Packages
      tap_action:
        action: navigate
        navigation_path: "mailalert"
      icon: "mdi:package-check"

  - type: conditional
    conditions:
      - entity: sensor.trash
        state: today
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Trash
      icon: "mdi:delete"

  - type: conditional
    conditions:
      - entity: sensor.recycling
        state: today
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Recycling
      icon: "mdi:recycle-variant"

  - type: conditional
    conditions:
      - entity: binary_sensor.is_rain_2
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Raining
      icon: "mdi:weather-pouring"
      tap_action:
        action: navigate
        navigation_path: "weather"

  - type: conditional
    conditions:
      - entity: binary_sensor.is_snow
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Snowing
      icon: "mdi:weather-snowy"

  - type: conditional
    conditions:
      - entity: input_boolean.vacation_mode
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Vacation Mode On
      icon: "mdi:airplane-check"

  - type: conditional
    conditions:
      - entity: input_boolean.guest_mode
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Guest Mode On
      icon: "mdi:bed"

  - type: conditional
    conditions:
      - entity: binary_sensor.wind_chill_active
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: >
        [[[ return "Wind Chill: " + states['sensor.wind_chill'].state + states['sensor.wind_chill'].attributes.unit_of_measurement;
        ]]]
      icon: >
        [[[ return states['sensor.wind_chill'].attributes.icon;
        ]]]

  - type: conditional
    conditions:
      - entity: binary_sensor.heat_index_active
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: >
        [[[ return "Heat Index: " + states['sensor.heat_index'].state + states['sensor.heat_index'].attributes.unit_of_measurement;
        ]]]
      icon: >
        [[[ return states['sensor.heat_index'].attributes.icon;
        ]]]
      tap_action:
        action: navigate
        navigation_path: "weather"

  - type: conditional
    conditions:
      - entity: vacuum.philoctetes
        state: "error"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Philoctetes
      icon: "mdi:alert"

  - type: conditional
    conditions:
      - entity: vacuum.catbug
        state: "error"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Catbug
      icon: "mdi:alert"

  - type: conditional
    conditions:
      - entity: vacuum.gurtrude
        state: "error"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Gurtrude
      icon: "mdi:alert"

  - type: conditional
    conditions:
      - entity: binary_sensor.wx_card
        state: "on"
    card:
      type: "custom:button-card"
      entity: sensor.nws_alerts
      tap_action:
        action: navigate
        navigation_path: "wxalert"
      template: chip_icon_label
      label: >
        [[[ 
          const title = states['sensor.nws_alerts'].attributes.title;
          const alertNum = states['sensor.nws_alerts'].state
          if (alertNum > 1) {
            return alertNum.concat(" NWS Alerts");
          } else {
            return title;
          }
        ]]]
      icon: >
        [[[ return states['sensor.nws_alerts'].attributes.icon ]]]

  - type: conditional
    conditions:
      - entity: input_select.dishwasher_state
        state: "Clean"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Dishwasher Done
      icon: "mdi:dishwasher"
      tap_action:
        action: call-service
        service: script.mark_dishwasher_as_dirty
      
  - type: conditional
    conditions:
      - entity: binary_sensor.water_front_planter
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Front Planter
      icon: mdi:watering-can-outline
      tap_action:
        action: navigate
        navigation_path: "outside"

  - type: conditional
    conditions:
      - entity: binary_sensor.water_greenhouse
        state: "on"
    card:
      type: "custom:button-card"
      template: chip_icon_label
      label: Greenhouse
      icon: mdi:watering-can-outline
      tap_action:
        action: navigate
        navigation_path: "outside"